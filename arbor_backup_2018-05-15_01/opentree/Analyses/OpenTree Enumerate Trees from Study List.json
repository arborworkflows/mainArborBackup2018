{"description": "This method expects to receive a table of study summaries for a taxon returned from OpenTree.  An OpenTree API call (phylesystem, really) is used to build a table listing each tree that is stored in each study from the input table.  A table, one row per tree, is created as output", "inputs": [{"description": "A list of studies in a tabletable created from a study query from OpenTree based on a taxon name", "format": "rows", "id": "studyTable", "name": "Study Summary Table", "type": "table"}], "mode": "python", "name": "OpenTree Enumerate Trees from Study List", "outputs": [{"description": "Each tree stored in a study is output on its own line.  The headers are 'studyID' and 'treeID'", "format": "rows", "id": "treeTable", "name": "Enumerated Table of Study Trees from OpenTree", "type": "table"}], "script": "\n# Given a table of tree studies from OpenTree, explore each study and create an output table with one row for every tree found. \n# Trees are indexed by study, then trees within each study\n\n# input: studyTable study table (with StudyID column hearder)\n# output: treeTable - a two columnn table with (studyID, treeID) pairs for all trees found in the studies\n\n# prepare the output tree list\n\nimport requests\nimport json\n\ntreeTable = {}\ntreeTable['fields'] = ['ot:studyId','ot:treeId']\ntreeTable['rows'] = []\n\n# go through each row of the input study table and find out what trees are in this study\n\nfor row in studyTable['rows']:\n    study = row['ot:studyId']\n    # this call returns the list of trees in the study\n    resp = requests.get('http://api.opentreeoflife.org/v3/study/'+study+'/tree')\n    jsonReturn = resp.json()\n    # go through the list and build an output table\n    for key in jsonReturn.keys():\n        outrow = {}\n        outrow['ot:studyId'] = study\n        outrow['ot:treeId'] = key\n        treeTable['rows'].append(outrow)\n"}