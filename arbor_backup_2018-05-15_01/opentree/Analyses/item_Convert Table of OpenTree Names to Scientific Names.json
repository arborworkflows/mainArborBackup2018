{"_id": "590df31d54cdbf2d4cbf0811", "_modelType": "item", "baseParentId": "58fad7c954cdbf552d799223", "baseParentType": "collection", "created": "2017-05-06T16:00:29.496000+00:00", "creatorId": "575874fe54cdbf51760708f3", "description": "", "folderId": "58fad7c954cdbf552d799225", "meta": {"analysis": {"description": "", "inputs": [{"description": "table of OTL format names, such as 'genus_species_ott12344'", "format": "rows", "id": "table", "name": "table", "type": "table"}], "mode": "python", "name": "Convert Table of OpenTree Names to Scientific Names", "outputs": [{"description": "output table with traditional species names 'genus species'", "format": "rows", "id": "outtable", "name": "outtable", "type": "table"}], "script": "\n# convert a table of OTL format of genus_species_ottXXXX names into standard \"genus species\".  Single names (taxonomy)\n# are passed through without the _ottXXX postpended, as well. \n\ncolname = table['fields'][0]\noutrows = []\nfor row in table['rows']:\n    outrow = {}\n    splitname = row[colname].split('_')\n    if len(splitname) == 3:\n        outname = splitname[0] + ' ' + splitname[1]\n    elif len(splitname) == 2:\n        outname = splitname[0]\n    else:\n        #complex case:  remove last _ottXXX and change to spaces, but leave all components\n        outname = ''\n        for i in range(len(splitname)-1):\n            outname = outname + splitname[i] + ' '\n        # strip off the final space\n        if len(outname)> 1:\n            outname = outname[:-1]\n    outrow[colname] = outname\n    outrows.append(outrow)\n    \nouttable = {}\nouttable['fields'] = [colname]\nouttable['rows'] = outrows\n    \n    "}}, "name": "Convert Table of OpenTree Names to Scientific Names", "size": 0, "updated": "2017-05-06T16:28:04.112000+00:00"}