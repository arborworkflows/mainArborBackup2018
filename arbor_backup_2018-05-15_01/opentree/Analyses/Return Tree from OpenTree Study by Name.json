{"description": "", "inputs": [{"default": {"data": "ot_598", "format": "text", "type": "string"}, "format": "text", "id": "studyID", "name": "studyID", "type": "string"}, {"default": {"data": "Tr_518", "format": "text", "type": "string"}, "format": "text", "id": "treeID", "name": "treeID", "type": "string"}, {"default": {"data": "False", "format": "text", "type": "string"}, "description": "output with study tree names (true) or OTT taxonomy names (False)", "format": "text", "id": "useOriginalNames", "name": "Use Original Study Tree Tip Names", "type": "string"}], "mode": "python", "name": "Return Tree from OpenTree Study by Name", "outputs": [{"description": "Output tree in Newick format", "format": "newick", "id": "tree", "name": "tree", "type": "tree"}, {"description": "output the Newick format tree as a string to review", "format": "text", "id": "newickString", "name": "newickString", "type": "string"}], "script": "#\n# Return Tree from OpenTree Study by Name\n#\n# description: this analysis expects a two-column table with an OpenTree studyID and a treeID within \n# the study.  This method fetches the tree and returns it as a newick tree (tree:newick format).  This method\n# can read the output of the \"OpenTree Enumerate Trees from Study\" method, which produces the table format \n# expected by this method. \n# \n# input: studyID - study number\n#        treeID - tree ID within the study to retrieve\n# output: outTree -  tree in newick format\n#\n\n\nimport requests\nimport unicodedata\n\noutrows = []\nstringdebug = ''\n\n\n# build an OTL query to return the matching ottId we want to use to request taxa\nif useOriginalNames == 'True':\n    query = 'https://api.opentreeoflife.org/v3/study/'+studyID+'/tree/'+treeID+'.tre'\nelse:\n    query = 'https://api.opentreeoflife.org/v3/study/'+studyID+'/tree/'+treeID+'.tre/?tip_label=ot:otttaxonname'\nresp = requests.get(query)\n\n# output as a readable newick string\nnewickString = resp.text\nnoSingleQuotes = newickString.replace(\"'\",\"\")\n\n# output as a Newick tree type\ntree = noSingleQuotes\n\n     "}