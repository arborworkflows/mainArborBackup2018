{"description": "a table with many rows is passed in.  A second input \"valuecolumn\" (table containing only a single column ) has values for rows from the main table to pass through.  Rows from the datatable are passed through only if their selected element matches one of the  entries in the indexcolumn.", "inputs": [{"description": "input table where only rows matching values will be passed through", "format": "rows", "id": "datatable", "name": "datatable", "type": "table"}, {"format": "rows", "id": "valuesTable", "name": "Column of Values in a table", "type": "table"}, {"domain": {"format": "column.names", "input": "datatable"}, "format": "text", "id": "indexcolumn", "name": "indexcolumn", "type": "string"}], "mode": "python", "name": "Select Matching Rows from Table", "outputs": [{"format": "rows", "id": "outtable", "name": "outtable", "type": "table"}, {"format": "text", "id": "debugstring", "name": "status ", "type": "string"}], "script": "# a table with many rows is passed in.  A second input \"valuecolumn\" (table containing only a single column ) has values for rows from the\n# main table to pass through.  Rows from the datatable are passed through only if their selected element matches one of the \n# entries in the indexcolumn.\n\n# inputs:\n# datatable - source table with too many rows\n# valuesTable - single column table with matching values \n# indexcolumn - string matching a column header from the datatable, and showing which column to use for selection\n\n# revision history:\n# 10/23/16 CRL initial version\n\ndebugstring = ''\ninfields = datatable['fields']\ninrowcount = len(datatable['rows'])\n\n\n# build a list of values to filter by creating a list out of the rows from the valuecolumn. \n# we were having a string/number mismatch, so convert everything to strings for comparison\n\nvaluelist = []\nfor row in valuesTable['rows']:\n    valuelist.append(str(row[valuesTable['fields'][0]]))\ndebugstring += str(len(valuelist)) + ' values in the valuecolumn\\n'\n\n#print first 5 entries to make sure they are good\n#for i in range(5):\n#    debugstring += 'value: '+ str(valuelist[i])+'\\n'\n\n\n# now loop through the source table and keep only the selected rows \noutrows = []\n#count = 0\nfor row in datatable['rows']:\n#    debugstring += 'compare: '+ str(row[indexcolumn])+ '\\n'\n    if str(row[indexcolumn]) in valuelist:\n        outrows.append(row)\n#        debugstring += 'match\\n'\n#    count += 1\n#    if count>25:\n#        break\n        \nouttable = {}\nouttable['fields'] = infields\nouttable['rows'] = outrows\n\ndebugstring += 'in rows: '+ str(inrowcount) + '\\n'\ndebugstring += 'out rows: ' + str(len(outrows)) + '\\n'\n\n"}