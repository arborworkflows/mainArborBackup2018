{"_id": "5a8836a454cdbf077f6de45e", "_modelType": "item", "baseParentId": "5a6f778d54cdbf077f6de37f", "baseParentType": "collection", "created": "2018-02-17T14:05:24.991000+00:00", "creatorId": "575874fe54cdbf51760708f3", "description": "", "folderId": "5a6f778e54cdbf077f6de381", "meta": {"analysis": {"description": "", "inputs": [{"format": "rows", "name": "datatable", "type": "table"}, {"description": "CSV list of columns to rename", "format": "text", "name": "originalColumnNameList", "type": "string"}], "mode": "python", "name": "Table Drop Column", "outputs": [{"format": "rows", "name": "newColumnTable", "type": "table"}], "script": "# this analysis expects an input table with a larger number of columns than are desired in the output table.  \n\n# input: datatable - data table with lots of columns (relatively speaking)\n# input: originalColumnNameList - single string with column names to drop\n\n# output: newColumnTable\n\n# revision history:\n# 02/16/18 CRL adapted from rename columns method\n\ninfields = datatable['fields']\nnospaceoriginal = originalColumnNameList.replace(\" \",\"\")\noriginallist = nospaceoriginal.split(',')\n\n# now loop through the source table and copy records if the column names didn't change.  Assign the value\n# to a new column header if this column name has been changed.  The original and new lists have to be in the same order\n\noutrows = []\noutfields = []\noutstring = ''\nfor row in datatable['rows']:\n    outrow = {}\n    for field in infields:\n        if field not in originallist:\n            \n            # assign a new column name to this entry, find it in the same position from the new name list\n            outrow[field] = row[field]\n            outfields.append(field)\n    outrows.append(outrow)\n\n# traverse the first row to see what attributes are present in the output table    \n#outfields = []    \n#for field in outrows[0].keys():\n#    outfields.append(field)\n      \n# build the output table in table.rows format        \nnewColumnTable = {}\nnewColumnTable['fields'] = outfields\nnewColumnTable['rows'] = outrows\n"}}, "name": "Table Drop Column", "size": 0, "updated": "2018-02-17T14:16:03.546000+00:00"}